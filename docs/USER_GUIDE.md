# Icon Extractor - 用户使用指南

欢迎使用 Icon Extractor，这是一个强大的图标提取和矢量化工具。本指南将帮助您快速上手并掌握所有功能。

---

## 📖 目录

1. [快速开始](#快速开始)
2. [界面介绍](#界面介绍)
3. [详细功能说明](#详细功能说明)
4. [常见问题](#常见问题)
5. [技巧与最佳实践](#技巧与最佳实践)
6. [故障排除](#故障排除)

---

## 🚀 快速开始

### 基本工作流程

```
上传图像 → 设置网格 → 检测图标 → 调整边界框 → 矢量化 → 导出 SVG
```

### 5 分钟快速入门

1. **准备图标网格图像**
   - 将您的图标排列成整齐的网格（如 4x4, 5x5）
   - 保存为 PNG, JPG 或 WEBP 格式

2. **上传图像**
   - 将图像拖拽到上传区域，或点击选择文件

3. **设置网格参数**
   - 输入行数和列数（例如 4 行 4 列）
   - 点击"开始检测"

4. **调整边界框**（可选）
   - 拖拽边界框调整位置
   - 拖拽控制点调整大小
   - 点击标签为图标命名

5. **选择预设并矢量化**
   - 选择质量预设（balanced 推荐）
   - 点击"批量矢量化"

6. **导出**
   - 点击"导出 ZIP"下载所有 SVG 文件

---

## 🖥️ 界面介绍

### 整体布局

```
┌─────────────────────────────────────────────────┐
│              Icon Extractor           [导出]    │  ← TopBar
├──────────┬──────────────────────────┬───────────┤
│ 图标列表 │                          │  属性面板  │
│          │                          │           │
│ Icon 1   │      [图像画布区域]       │  预设选择  │
│ Icon 2   │                          │  质量检查  │
│ Icon 3   │                          │  导出设置  │
│ ...      │                          │           │
├──────────┴──────────────────────────┴───────────┤
│ ✓ 就绪 | 检测到 16 个图标 | 本地处理          │  ← StatusBar
└─────────────────────────────────────────────────┘
```

### 各面板说明

#### TopBar（顶部栏）
- 应用标题和版本信息
- 主要操作按钮（导出）

#### AssetsPanel（左侧面板）
- 显示所有检测到的图标
- 图标选择状态指示
- 点击选中图标

#### CanvasArea（中央画布）
- 显示上传的图像
- 边界框叠加层
- 交互式编辑区域

#### PropertiesPanel（右侧面板）
- **预览区域**: 原图和 SVG 对比
- **矢量化设置**: 质量预设选择
- **网格设置**: 行列数配置
- **导出设置**: 文件名和格式选项

#### StatusBar（底部状态栏）
- 当前状态指示
- 处理进度
- 图标统计

---

## 📚 详细功能说明

### 1. 上传图像

#### 支持的格式
- PNG（推荐）
- JPG / JPEG
- WEBP
- SVG

#### 上传方式
1. **拖拽上传**: 直接将图像文件拖到上传区域
2. **点击上传**: 点击上传区域选择文件

#### 提示
- 建议使用高分辨率图像（至少 512x512）
- 图标之间留有适当间距
- 背景纯净（纯白或纯黑）效果最佳

---

### 2. 网格检测

#### 设置行列数
```
示例：
- 4x4 网格 → 行数: 4, 列数: 4
- 5x10 网格 → 行数: 5, 列数: 10
- 3x8 网格 → 行数: 3, 列数: 8
```

#### 检测流程
1. 输入行数和列数
2. 点击"开始检测"按钮
3. 等待检测完成
4. 检查生成的边界框

#### 查看模式
- **原图模式**: 仅显示原始图像
- **网格模式**: 显示边界框叠加层

---

### 3. 边界框编辑

#### 选择边界框
- 点击边界框即可选中
- 选中的边界框会高亮显示（蓝色边框）
- 8 个控制点会显示

#### 移动边界框
1. 选中边界框
2. 拖拽边界框内部移动位置
3. 释放鼠标完成移动

#### 调整大小
- **4 个角控制点**: 同时调整水平和垂直大小
- **4 条边控制点**: 仅调整水平或垂直大小

#### 删除边界框
- 选中边界框后按 `Delete` 或 `Backspace` 键
- 或点击工具栏的删除按钮

#### 撤销/重做
- `Ctrl + Z` (Windows/Linux) 或 `Cmd + Z` (Mac): 撤销
- `Ctrl + Y` (Windows/Linux) 或 `Cmd + Shift + Z` (Mac): 重做
- 最多保存 5 步历史

---

### 4. 图标标签

#### 添加/编辑标签
1. 点击边界框上方的标签
2. 在弹出的输入框中输入名称
3. 按 `Enter` 保存或 `Esc` 取消

#### 标签规则
- **长度**: 1-50 个字符
- **非法字符**: 不允许 `/ \ : * ? " < > |`
- **唯一性**: 标签不能重复

#### 标签用途
- 导出时作为文件名
- 在图标列表中显示
- 帮助识别不同图标

---

### 5. 矢量化

#### 质量预设

| 预设 | 适用场景 | 特点 |
|------|---------|------|
| **balanced** (平衡) | 一般用途 | 默认预设，质量和大小平衡 |
| **clean** (简洁) | 简单图标 | 更激进的路径简化，文件更小 |
| **precise** (精确) | 复杂图标 | 保留更多细节，文件较大 |

#### 批量矢量化
1. 选择质量预设
2. 点击"批量矢量化"按钮
3. 查看进度条和百分比
4. 等待处理完成

#### 处理时间参考
- 简单图标 (16x16): ~0.5 秒/个
- 中等图标 (32x32): ~1 秒/个
- 复杂图标 (64x64): ~2 秒/个

#### 性能优化
- 使用 4 个并发 WebWorker
- 超过 100 个图标自动分块处理
- 进度实时更新

---

### 6. 预览与质量检查

#### 预览面板
- **左侧**: 原始图像
- **右侧**: 矢量化后的 SVG

#### 缩放功能
- `1x`: 原始大小
- `2x`: 2 倍放大
- `4x`: 4 倍放大
- `8x`: 8 倍放大

#### 质量指标
- **文件大小**: SVG 文件大小（建议 < 50KB）
- **节点数**: 路径节点数量（建议 < 500）
- **颜色数**: 使用的颜色数量

#### 质量警告
⚠️ 可能出现的警告：
- 路径复杂度过高（节点数 > 500）
- 文件大小过大（> 50KB）
- 颜色数量过多（> 10 种）
- 路径数量异常（只有 1 条路径）

---

### 7. 导出

#### 导出选项
- **全部图标**: 导出所有检测到的图标
- **选中的图标**: 仅导出选中的图标

#### 文件命名规则
- 如果有标签: 使用标签名称
- 如果无标签: 使用图标 ID (icon-1, icon-2, ...)
- 文件扩展名: `.svg`

#### 导出格式
- ZIP 压缩包
- 包含所有 SVG 文件
- 保持目录结构

---

## ❓ 常见问题

### Q1: 为什么检测不到图标？
**A**: 检查以下几点：
- 行列数是否设置正确
- 图像是否真的是网格排列
- 图像分辨率是否足够高

### Q2: 边界框位置不准确怎么办？
**A**:
- 使用拖拽和缩放手动调整
- 删除错误的边界框后重新检测
- 检查行列数是否匹配

### Q3: SVG 文件太大怎么办？
**A**:
- 尝试使用 `clean` 预设
- 减少原始图标的大小
- 检查是否有不必要的细节

### Q4: 矢量化效果不理想？
**A**:
- 尝试 `precise` 预设获得更多细节
- 确保原始图像清晰度高
- 检查图标背景是否纯净

### Q5: 处理速度慢怎么办？
**A**:
- 检查是否使用了 WebWorker（查看状态栏）
- 减少一次处理的图标数量
- 关闭其他占用 CPU 的程序

### Q6: 可以处理彩色图标吗？
**A**:
- 可以，VTracer WASM 支持彩色图像
- 但推荐使用黑白单色图标效果最佳

### Q7: 导出的 SVG 如何使用？
**A**:
- 可以直接在浏览器中打开
- 导入设计软件（Figma, Illustrator, Sketch）
- 在网页开发中使用
- 作为图标字体源文件

---

## 💡 技巧与最佳实践

### 准备阶段
1. **使用高分辨率图像**: 至少 1024x1024 像素
2. **保持图标间距**: 至少 10-20 像素间距
3. **统一图标大小**: 方便批量处理
4. **纯净背景**: 白底黑图标或黑底白图标

### 编辑阶段
1. **使用有意义的标签**: 方便后续识别
2. **批量相似图标**: 可以快速处理
3. **利用撤销/重做**: 快速尝试不同调整
4. **预览后再导出**: 确保质量满意

### 矢量化阶段
1. **从 balanced 预设开始**: 大多数情况最佳
2. **复杂图标用 precise**: 保留更多细节
3. **简单图标用 clean**: 减小文件大小
4. **检查质量警告**: 确保导出质量

### 导出阶段
1. **选择性导出**: 只导出需要的图标
2. **验证文件名**: 确保标签正确
3. **测试 SVG**: 在设计软件中验证

---

## 🔧 故障排除

### 上传失败

**症状**: 无法上传图像

**解决方案**:
1. 检查文件格式（仅支持 PNG, JPG, WEBP, SVG）
2. 检查文件大小（建议 < 20MB）
3. 刷新页面重试
4. 检查浏览器控制台错误

### 检测卡住

**症状**: 检测进度不动

**解决方案**:
1. 检查行列数是否合理（< 100x100）
2. 刷新页面重新上传
3. 尝试减小图像尺寸

### 矢量化失败

**症状**: 矢量化进度卡住或报错

**解决方案**:
1. 检查浏览器是否支持 WebAssembly
2. 检查浏览器控制台错误
3. 尝试刷新页面
4. 确保有足够内存（建议 > 4GB）

### 导出失败

**症状**: 点击导出无响应

**解决方案**:
1. 确保至少有一个图标被矢量化
2. 检查浏览器下载权限
3. 尝试只导出少量图标
4. 检查浏览器控制台错误

### 性能问题

**症状**: 应用卡顿或响应慢

**解决方案**:
1. 关闭其他浏览器标签
2. 减小图像尺寸
3. 分批处理图标（每次 < 100 个）
4. 使用最新版浏览器

---

## ⌨️ 键盘快捷键

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `Ctrl + Z` | 撤销 | 撤销上一次边界框操作 |
| `Cmd + Z` | 撤销 | Mac 版本 |
| `Ctrl + Y` | 重做 | 重做已撤销的操作 |
| `Cmd + Shift + Z` | 重做 | Mac 版本 |
| `Delete` | 删除 | 删除选中的边界框 |
| `Backspace` | 删除 | 删除选中的边界框 |
| `Esc` | 取消选择 | 取消选中的边界框 |

---

## 🔐 隐私与安全

### 本地处理
- ✅ 所有处理都在本地完成
- ✅ 不上传任何数据到服务器
- ✅ 图像和 SVG 不会离开您的设备

### 开源透明
- ✅ 代码完全开源
- ✅ 可自行审查和修改
- ✅ 无隐藏的数据收集

---

## 📞 获取帮助

### 文档
- 查看技术文档: `docs/technical-spec.md`
- 查看开发指南: `CLAUDE.md`

### 问题反馈
- 提交 Issue: GitHub Issues
- 查看已知问题: CHANGELOG.md

### 学习资源
- SVG 基础知识
- 图标设计原则
- 矢量化算法原理

---

## 🎓 进阶使用

### 批量处理多个图标网格
1. 逐个上传不同的图标网格
2. 每个网格单独检测和矢量化
3. 最后统一导出所有图标

### 自定义工作流
1. 使用特定标签命名规则
2. 按功能分类图标
3. 批量导出时自动分类

### 集成到项目
1. 导出 SVG 文件
2. 添加到项目的图标库
3. 配置构建脚本优化 SVG

---

**祝您使用愉快！** 🎉
