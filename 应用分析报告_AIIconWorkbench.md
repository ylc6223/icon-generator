# AI Icon Workbench - å®Œæ•´åº”ç”¨åˆ†ææŠ¥å‘Š

> ç”Ÿæˆæ—¶é—´: 2026-01-13
> åˆ†æç›®æ ‡: src/reference/enter_AIIcon ç›®å½•
> ç”¨é€”: åº”ç”¨å¤åˆ»å‚è€ƒ

---

## ğŸ“‹ ç›®å½•

1. [åº”ç”¨æ¦‚è¿°](#åº”ç”¨æ¦‚è¿°)
2. [æŠ€æœ¯æ ˆåˆ†æ](#æŠ€æœ¯æ ˆåˆ†æ)
3. [é¡µé¢å¸ƒå±€ç»“æ„](#é¡µé¢å¸ƒå±€ç»“æ„)
4. [æ ¸å¿ƒåŠŸèƒ½è¯¦è§£](#æ ¸å¿ƒåŠŸèƒ½è¯¦è§£)
5. [çŠ¶æ€ç®¡ç†æ¶æ„](#çŠ¶æ€ç®¡ç†æ¶æ„)
6. [æ ¸å¿ƒç®—æ³•å®ç°](#æ ¸å¿ƒç®—æ³•å®ç°)
7. [UI/UX è®¾è®¡ç³»ç»Ÿ](#uiux-è®¾è®¡ç³»ç»Ÿ)
8. [ç»„ä»¶æ¶æ„åˆ†æ](#ç»„ä»¶æ¶æ„åˆ†æ)
9. [æ•°æ®æµè½¬è¿‡ç¨‹](#æ•°æ®æµè½¬è¿‡ç¨‹)
10. [ç‰¹è‰²äº®ç‚¹](#ç‰¹è‰²äº®ç‚¹)
11. [å¯ä¼˜åŒ–å»ºè®®](#å¯ä¼˜åŒ–å»ºè®®)

---

## åº”ç”¨æ¦‚è¿°

### äº§å“å®šä½
**AI Icon Workbench** æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å›¾æ ‡æ‰¹å¤„ç†å·¥ä½œå°åº”ç”¨,ä¸»è¦ç”¨äºå¤„ç† AI ç”Ÿæˆçš„å›¾æ ‡çŸ©é˜µå›¾åƒ,å°†å…¶çŸ¢é‡åŒ–å¹¶å¯¼å‡ºä¸º SVG æ–‡ä»¶ã€‚

### æ ¸å¿ƒä»·å€¼
- ğŸ¯ **æ‰¹å¤„ç†**: ä¸€æ¬¡æ€§å¤„ç†å¤šä¸ªå›¾æ ‡(æ”¯æŒ 9-64 ä¸ªå›¾æ ‡çš„ç½‘æ ¼å¸ƒå±€)
- ğŸ”„ **çŸ¢é‡åŒ–**: å°†ä½å›¾è‡ªåŠ¨è½¬æ¢ä¸º SVG çŸ¢é‡æ ¼å¼
- ğŸ¨ **è´¨é‡æ§åˆ¶**: æä¾›ä¸‰ç§çŸ¢é‡åŒ–é¢„è®¾(balanced/clean/precise)
- ğŸ’¾ **ä¾¿æ·å¯¼å‡º**: ä¸€é”®æ‰“åŒ…å¯¼å‡ºé€‰ä¸­çš„å›¾æ ‡
- ğŸ”’ **éšç§ä¿æŠ¤**: æ‰€æœ‰å¤„ç†å‡åœ¨æœ¬åœ°å®Œæˆ

### å…¸å‹ä½¿ç”¨åœºæ™¯
1. ç”¨æˆ·é€šè¿‡ AI å·¥å…·ç”Ÿæˆå›¾æ ‡çŸ©é˜µå›¾åƒ(å¦‚ 4x4 çš„å›¾æ ‡ç½‘æ ¼)
2. ä¸Šä¼ åˆ°å·¥ä½œå°
3. è‡ªåŠ¨æ£€æµ‹å¹¶åˆ†å‰²å„ä¸ªå›¾æ ‡
4. é¢„è§ˆå¹¶é€‰æ‹©éœ€è¦å¯¼å‡ºçš„å›¾æ ‡
5. é€‰æ‹©çŸ¢é‡åŒ–è´¨é‡é¢„è®¾
6. å¯¼å‡ºä¸º SVG æ–‡ä»¶åŒ…

---

## æŠ€æœ¯æ ˆåˆ†æ

### å‰ç«¯æ¡†æ¶
```json
{
  "æ ¸å¿ƒæ¡†æ¶": "React 19.1.1",
  "å¼€å‘è¯­è¨€": "TypeScript 5.9.2",
  "æ„å»ºå·¥å…·": "Vite 7.1.4",
  "è·¯ç”±æ–¹æ¡ˆ": "React Router DOM v7.8.2"
}
```

### çŠ¶æ€ç®¡ç†
```json
{
  "ä¸»çŠ¶æ€åº“": "Zustand",
  "æœåŠ¡ç«¯çŠ¶æ€": "@tanstack/react-query 5.86.0",
  "è¡¨å•çŠ¶æ€": "react-hook-form 7.62.0"
}
```

### UI ç»„ä»¶åº“
```json
{
  "åŸºç¡€ç»„ä»¶": "@radix-ui/* (æ— å¤´ç»„ä»¶åº“)",
  "æ ·å¼æ–¹æ¡ˆ": "Tailwind CSS 3.4.17",
  "å›¾æ ‡åº“": "lucide-react 0.542.0",
  "åŠ¨ç”»åº“": "framer-motion 12.23.12",
  "ä¸»é¢˜ç³»ç»Ÿ": "next-themes 0.4.6"
}
```

### å·¥å…·åº“
```json
{
  "æ–‡ä»¶å¤„ç†": "jszip 3.10.1 (ZIP æ‰“åŒ…)",
  "æ ·å¼å·¥å…·": "clsx, tailwind-merge, class-variance-authority",
  "æ•°æ®éªŒè¯": "zod 4.1.5",
  "æ—¥æœŸå¤„ç†": "date-fns 4.1.0",
  "é€šçŸ¥ç³»ç»Ÿ": "sonner 2.0.7"
}
```

### å¼€å‘å·¥å…·
```json
{
  "åŒ…ç®¡ç†å™¨": "pnpm 8.6.12",
  "ä»£ç æ£€æŸ¥": "ESLint 9.34.0",
  "ç±»å‹æ£€æŸ¥": "TypeScript 5.9.2"
}
```

---

## é¡µé¢å¸ƒå±€ç»“æ„

### æ•´ä½“å¸ƒå±€æ¶æ„

åº”ç”¨é‡‡ç”¨**ç»å…¸ä¸‰æ å¼å·¥ä½œå°å¸ƒå±€**,ç»“æ„å¦‚ä¸‹:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    TopBar (56px)                         â”‚
â”‚  [Logo] [é¡¹ç›®åç§°]          [Export] [Settings]          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Assets   â”‚         Canvas Area              â”‚ Properties  â”‚
â”‚ Panel    â”‚                                  â”‚   Panel     â”‚
â”‚ (280px)  â”‚                                  â”‚  (320px)    â”‚
â”‚          â”‚                                  â”‚             â”‚
â”‚ [Source] â”‚  [Original View / Grid View]     â”‚ [Grid Config]â”‚
â”‚ Image    â”‚                                  â”‚ [Quality]   â”‚
â”‚          â”‚  - ç½‘æ ¼é¢„è§ˆ                      â”‚ [Selection] â”‚
â”‚          â”‚  - å›¾æ ‡é€‰æ‹©                      â”‚             â”‚
â”‚          â”‚                                  â”‚             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 StatusBar (40px)                          â”‚
â”‚  [çŠ¶æ€æŒ‡ç¤º] [é€‰ä¸­æ•°é‡]        [éšç§æç¤º: æœ¬åœ°å¤„ç†]         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å“åº”å¼è®¾è®¡

| å±å¹•å°ºå¯¸ | å·¦ä¾§é¢æ¿ | ä¸»ç”»å¸ƒ | å³ä¾§é¢æ¿ |
|---------|---------|--------|---------|
| < lg    | éšè—    | æ˜¾ç¤º   | éšè—    |
| >= lg   | æ˜¾ç¤º    | æ˜¾ç¤º   | éšè—    |
| >= xl   | æ˜¾ç¤º    | æ˜¾ç¤º   | æ˜¾ç¤º    |

### å¸ƒå±€é…ç½® (CSS å˜é‡)

```css
--topbar-height: 56px;
--left-panel-width: 280px;
--right-panel-width: 320px;
--statusbar-height: 40px;
```

---

## æ ¸å¿ƒåŠŸèƒ½è¯¦è§£

### 1. å›¾åƒä¸Šä¼ åŠŸèƒ½

**ä½ç½®**: `AssetsPanel` + `UploadZone`

**åŠŸèƒ½ç‰¹æ€§**:
- âœ… æ‹–æ‹½ä¸Šä¼ 
- âœ… ç‚¹å‡»é€‰æ‹©æ–‡ä»¶
- âœ… è‡ªåŠ¨æå–å›¾åƒå°ºå¯¸ä¿¡æ¯
- âœ… æ”¯æŒæ›¿æ¢å·²ä¸Šä¼ å›¾åƒ
- âœ… å›¾åƒé¢„è§ˆ

**æ–‡ä»¶ç±»å‹æ”¯æŒ**:
```typescript
file.type.startsWith('image/') // æ”¯æŒæ‰€æœ‰å›¾åƒç±»å‹
// æç¤º: PNG, JPG, WebP
```

**æ•°æ®ç»“æ„**:
```typescript
{
  uploadedImage: string  // Data URL
  imageFile: File        // åŸå§‹æ–‡ä»¶å¯¹è±¡
  imageInfo: {
    width: number        // å›¾åƒå®½åº¦(px)
    height: number       // å›¾åƒé«˜åº¦(px)
    name: string         // æ–‡ä»¶å
  }
}
```

### 2. å›¾æ ‡æ£€æµ‹åŠŸèƒ½

**ä½ç½®**: `CanvasArea` + `detectIconsInImage`

**å·¥ä½œåŸç†**:
1. ç”¨æˆ·é€‰æ‹©ç½‘æ ¼å°ºå¯¸(å¦‚ 4x4)
2. ç³»ç»Ÿè‡ªåŠ¨è®¡ç®—æ¯ä¸ªå•å…ƒæ ¼å°ºå¯¸:
   ```typescript
   cellWidth = Math.floor(imageWidth / gridCols)
   cellHeight = Math.floor(imageHeight / gridRows)
   ```
3. ä½¿ç”¨ Canvas API å°†æ¯ä¸ªå•å…ƒæ ¼è£å‰ªä¸ºç‹¬ç«‹å›¾åƒ
4. ç”Ÿæˆå›¾æ ‡å¯¹è±¡,åŒ…å«åæ ‡ã€å°ºå¯¸ã€å›¾åƒæ•°æ®

**æ”¯æŒçš„ç½‘æ ¼é…ç½®**:
```typescript
3x3  (9 icons)
4x4  (16 icons)  // é»˜è®¤
5x5  (25 icons)
6x6  (36 icons)
8x8  (64 icons)
```

**è¾“å‡ºæ•°æ®ç»“æ„**:
```typescript
DetectedIcon {
  id: string           // æ ¼å¼: "icon-{row}-{col}"
  x: number           // åœ¨åŸå›¾ä¸­çš„Xåæ ‡
  y: number           // åœ¨åŸå›¾ä¸­çš„Yåæ ‡
  width: number       // å•å…ƒæ ¼å®½åº¦
  height: number      // å•å…ƒæ ¼é«˜åº¦
  selected: boolean   // é»˜è®¤: true
  imageData: string   // Data URL (PNG)
}
```

### 3. åŒè§†å›¾æ¨¡å¼

**ä½ç½®**: `CanvasArea`

#### åŸå›¾è§†å›¾ (Original View)
- æ˜¾ç¤ºå®Œæ•´ä¸Šä¼ çš„å›¾åƒ
- å åŠ è¾¹ç•Œæ¡†(bounding boxes)
- ç‚¹å‡»è¾¹ç•Œæ¡†å¯åˆ‡æ¢é€‰ä¸­çŠ¶æ€
- è§†è§‰åé¦ˆ:
  - é€‰ä¸­: `border-primary bg-primary/10`
  - æœªé€‰ä¸­: `border-muted-foreground/30`

#### ç½‘æ ¼è§†å›¾ (Grid View)
- ä»¥ç½‘æ ¼å½¢å¼å±•ç¤ºå„ä¸ªå›¾æ ‡
- å“åº”å¼å¸ƒå±€: `repeat(auto-fill, minmax(100px, 1fr))`
- å¡ç‰‡å¼è®¾è®¡,å¸¦æ‚¬åœæ•ˆæœ
- æ˜¾ç¤ºå›¾æ ‡ç¼–å·

### 4. çŸ¢é‡åŒ–åŠŸèƒ½

**ä½ç½®**: `imageToSvg` + `traceToSvg`

**ä¸‰ç§é¢„è®¾æ¨¡å¼**:

| æ¨¡å¼     | åˆ†è¾¨ç‡ | é˜ˆå€¼  | ç®€åŒ–åº¦ | é€‚ç”¨åœºæ™¯           |
|---------|--------|-------|--------|------------------|
| balanced | 1x     | 160   | 1      | å¹³è¡¡è´¨é‡å’Œæ–‡ä»¶å¤§å°    |
| clean    | 1.5x   | 200   | 2      | ç®€æ´è·¯å¾„,ç®€å•å½¢çŠ¶    |
| precise  | 2x     | 128   | 0.5    | ä¿ç•™æœ€å¤šç»†èŠ‚       |

**çŸ¢é‡åŒ–æµç¨‹**:
```
1. å›¾åƒç¼©æ”¾ (æ ¹æ®é¢„è®¾)
2. äºŒå€¼åŒ–å¤„ç† (äº®åº¦é˜ˆå€¼)
3. è¾¹ç¼˜æ£€æµ‹ (æ£€æµ‹è¾¹ç•Œåƒç´ )
4. è½®å»“è¿½è¸ª (8é‚»åŸŸç®—æ³•)
5. è·¯å¾„ç®€åŒ– (Douglas-Peuckerç®—æ³•)
6. ç”ŸæˆSVGè·¯å¾„
```

### 5. æ‰¹é‡å¯¼å‡ºåŠŸèƒ½

**ä½ç½®**: `TopBar` + `exportIconsAsZip`

**å¯¼å‡ºæµç¨‹**:
```typescript
1. è¿‡æ»¤é€‰ä¸­çš„å›¾æ ‡
2. å¯¹æ¯ä¸ªå›¾æ ‡æ‰§è¡ŒçŸ¢é‡åŒ–
3. æ·»åŠ åˆ° ZIP æ–‡ä»¶ (å‘½å: icon-{index}.svg)
4. ç”Ÿæˆ Blob å¹¶è§¦å‘ä¸‹è½½
5. æ˜¾ç¤ºæˆåŠŸæç¤º
```

**æ–‡ä»¶å‘½å**:
```
icon-1.svg
icon-2.svg
icon-3.svg
...
```

### 6. é€‰æ‹©ç®¡ç†

**ä½ç½®**: `PropertiesPanel`

**åŠŸèƒ½**:
- âœ… å…¨é€‰
- âœ… å…¨ä¸é€‰
- âœ… å•ä¸ªåˆ‡æ¢
- âœ… å®æ—¶æ˜¾ç¤ºé€‰ä¸­æ•°é‡

**äº¤äº’**:
- ç‚¹å‡»å¡ç‰‡/è¾¹ç•Œæ¡†åˆ‡æ¢çŠ¶æ€
- è§†è§‰åé¦ˆ(é€‰ä¸­æ ‡è¯†)
- çŠ¶æ€æ å®æ—¶æ›´æ–°

---

## çŠ¶æ€ç®¡ç†æ¶æ„

### Zustand Store ç»“æ„

**æ–‡ä»¶**: `src/stores/workbench-store.ts`

```typescript
WorkbenchState {
  // === ä¸Šä¼ çŠ¶æ€ ===
  uploadedImage: string | null
  imageFile: File | null
  imageInfo: {
    width: number
    height: number
    name: string
  } | null

  // === å¤„ç†çŠ¶æ€ ===
  status: 'idle' | 'uploading' | 'detecting' | 'processing' | 'ready'
  detectedIcons: DetectedIcon[]

  // === è§†å›¾çŠ¶æ€ ===
  viewMode: 'original' | 'grid'

  // === è®¾ç½® ===
  vectorizationPreset: 'balanced' | 'clean' | 'precise'
  gridSize: { rows: number; cols: number }

  // === Actions ===
  setUploadedImage: (image, file, info) => void
  setStatus: (status) => void
  setDetectedIcons: (icons) => void
  toggleIconSelection: (id) => void
  selectAllIcons: () => void
  deselectAllIcons: () => void
  setViewMode: (mode) => void
  setVectorizationPreset: (preset) => void
  setGridSize: (rows, cols) => void
  reset: () => void
}
```

### çŠ¶æ€æµè½¬å›¾

```
[idle]
    â†“ ä¸Šä¼ å›¾åƒ
[uploading] â†’ [detecting]
    â†“ æ£€æµ‹å®Œæˆ
[processing] â†’ [ready]
    â†“ å¯¼å‡º
[ready] (ä¿æŒçŠ¶æ€)

å¯ä»¥éšæ—¶ reset() å›åˆ° idle
```

### é»˜è®¤é…ç½®

```typescript
{
  status: 'idle'
  viewMode: 'original'
  vectorizationPreset: 'balanced'
  gridSize: { rows: 4, cols: 4 }
}
```

---

## æ ¸å¿ƒç®—æ³•å®ç°

### 1. å›¾æ ‡æ£€æµ‹ç®—æ³•

```typescript
// src/lib/icon-processor.ts: detectIconsInImage
```

**ç®—æ³•æ€è·¯**:
1. åŠ è½½å›¾åƒåˆ° Canvas
2. è®¡ç®—å•å…ƒæ ¼å°ºå¯¸ = å›¾åƒå°ºå¯¸ / ç½‘æ ¼è¡Œåˆ—æ•°
3. åŒé‡éå†ç½‘æ ¼
4. ä½¿ç”¨ `drawImage` è£å‰ªæ¯ä¸ªå•å…ƒæ ¼
5. è½¬æ¢ä¸º Data URL

**å…³é”®ä»£ç **:
```typescript
const cellWidth = Math.floor(img.width / gridCols);
const cellHeight = Math.floor(img.height / gridRows);

cellCtx.drawImage(
  img,
  x, y, cellWidth, cellHeight,  // æºåŒºåŸŸ
  0, 0, cellWidth, cellHeight   // ç›®æ ‡åŒºåŸŸ
);
```

### 2. å›¾åƒäºŒå€¼åŒ–

```typescript
// src/lib/icon-processor.ts: traceToSvg
```

**ç®—æ³•**:
```typescript
// è®¡ç®—äº®åº¦
const brightness = (r + g + b) / 3;

// åˆ¤æ–­æ˜¯å¦ä¸ºèƒŒæ™¯
const isBackground = brightness > threshold || alpha < 128;

// äºŒå€¼åŒ–
binary[y][x] = !isBackground;
```

**é˜ˆå€¼è®¾ç½®**:
- clean: 200 (æ›´ä¸¥æ ¼)
- precise: 128 (æ›´å®½æ¾)
- balanced: 160

### 3. è¾¹ç¼˜æ£€æµ‹

```typescript
// src/lib/icon-processor.ts: generatePaths
```

**ç®—æ³•**: ç®€å•çš„è¾¹ç•Œåƒç´ æ£€æµ‹

```typescript
// æ£€æŸ¥8é‚»åŸŸ
const isEdge = !binary[y-1][x] || !binary[y+1][x] ||
               !binary[y][x-1] || !binary[y][x+1];
```

åªæœ‰å½“åƒç´ å‘¨å›´è‡³å°‘æœ‰ä¸€ä¸ªèƒŒæ™¯åƒç´ æ—¶,æ‰è®¤ä¸ºæ˜¯è¾¹ç¼˜ã€‚

### 4. è½®å»“è¿½è¸ªç®—æ³•

```typescript
// src/lib/icon-processor.ts: traceContour
```

**ç®—æ³•**: ç®€åŒ–çš„è½®å»“è¿½è¸ª

```
1. ä»è¾¹ç¼˜åƒç´ å¼€å§‹
2. æŒ‰ç…§å›ºå®šæ–¹å‘é¡ºåº(8é‚»åŸŸ)æœç´¢ä¸‹ä¸€ä¸ªè¾¹ç¼˜åƒç´ 
3. è®°å½•è·¯å¾„ç‚¹
4. å›åˆ°èµ·ç‚¹æˆ–æ— æ³•ç»§ç»­æ—¶åœæ­¢
```

**æ–¹å‘æ•°ç»„**:
```typescript
const directions = [
  [0, -1], [1, -1], [1, 0], [1, 1],
  [0, 1], [-1, 1], [-1, 0], [-1, -1]
];
```

### 5. è·¯å¾„ç®€åŒ–ç®—æ³•

```typescript
// src/lib/icon-processor.ts: simplifyPath
```

**ç®—æ³•**: Douglas-Peucker ç®—æ³•

```typescript
é€’å½’æ­¥éª¤:
1. è¿æ¥é¦–å°¾ç‚¹å½¢æˆç›´çº¿
2. æ‰¾åˆ°è·ç¦»ç›´çº¿æœ€è¿œçš„ç‚¹
3. å¦‚æœè·ç¦» > å®¹å·®:
   - åœ¨æœ€è¿œç‚¹å¤„åˆ†å‰²
   - é€’å½’å¤„ç†ä¸¤æ®µ
4. å¦åˆ™:
   - åªä¿ç•™é¦–å°¾ç‚¹
```

**å®¹å·®è®¾ç½®**:
- precise: 0.5 (æœ€å°ç®€åŒ–)
- balanced: 1 (ä¸­ç­‰ç®€åŒ–)
- clean: 2 (æœ€å¤§ç®€åŒ–)

### 6. SVG ç”Ÿæˆ

```typescript
// src/lib/icon-processor.ts: traceToSvg (è¿”å›)
```

**æ ¼å¼**:
```svg
<svg xmlns="http://www.w3.org/2000/svg"
     viewBox="0 0 {width} {height}"
     fill="currentColor">
  <path d="M x1 y1 L x2 y2 ... Z"
        fill-rule="evenodd"/>
</svg>
```

---

## UI/UX è®¾è®¡ç³»ç»Ÿ

### è®¾è®¡ç³»ç»Ÿåç§°: **Lumina Design System**

**è®¾è®¡ç†å¿µ**: Soft, Calm, Functional(æŸ”å’Œã€å¹³é™ã€åŠŸèƒ½æ€§å¼º)

### é…è‰²æ–¹æ¡ˆ

#### ä¸»è‰²è°ƒ - è“ç´«è‰²ç³»
```css
--primary-100: 228 100% 97%  /* æµ…è‰²èƒŒæ™¯ */
--primary-500: 228 100% 71%  /* ä¸»è‰² */
--primary-900: 228 60% 25%   /* æ·±è‰²æ–‡æœ¬ */
```

#### ä¸­æ€§è‰²
```css
--neutral-100: 240 20% 99%
--neutral-200: 240 5% 96%
--neutral-500: 240 4% 65%
--neutral-900: 240 6% 10%
```

#### è¯­ä¹‰åŒ–é¢œè‰²
```css
--background: 0 0% 100%         /* ä¸»èƒŒæ™¯ */
--foreground: 240 6% 10%        /* ä¸»æ–‡æœ¬ */
--surface: 240 20% 99%          /* è¡¨é¢èƒŒæ™¯ */
--surface-subtle: 0 0% 98%      /* æ¬¡è¦è¡¨é¢ */
--canvas: 240 5% 96%            /* ç”»å¸ƒèƒŒæ™¯ */
--muted: 240 5% 96%             /* å¼±åŒ–èƒŒæ™¯ */
--muted-foreground: 240 4% 65%  /* å¼±åŒ–æ–‡æœ¬ */
--accent: 228 100% 97%          /* å¼ºè°ƒè‰² */
```

### é˜´å½±ç³»ç»Ÿ

```css
--shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.04)
--shadow-md: 0 2px 4px rgba(0, 0, 0, 0.06)
--shadow-lg: 0 4px 8px rgba(0, 0, 0, 0.08)
```

**ç‰¹ç‚¹**: ä½é€æ˜åº¦ã€çŸ­è·ç¦»,è¥é€ æŸ”å’Œæ•ˆæœ

### åœ†è§’ç³»ç»Ÿ

```css
--radius: 0.375rem (6px)

lg: var(--radius)         /* 6px */
md: calc(var(--radius) - 2px)  /* 4px */
sm: calc(var(--radius) - 4px)  /* 2px */
```

### å­—ä½“ç³»ç»Ÿ

| ç±»å‹        | å¤§å°   | è¡Œé«˜   | å­—é‡   | ç”¨é€”          |
|------------|--------|--------|--------|--------------|
| display-lg | 40px   | 48px   | 600    | å¤§æ ‡é¢˜        |
| display-sm | 32px   | 40px   | 600    | ä¸­æ ‡é¢˜        |
| headline-lg| 24px   | 32px   | 600    | é¡µé¢æ ‡é¢˜       |
| headline-sm| 18px   | 26px   | 600    | åŒºå—æ ‡é¢˜       |
| body-lg    | 15px   | 22px   | 500    | æ­£æ–‡          |
| body-sm    | 13px   | 18px   | 400    | æ¬¡è¦æ–‡æœ¬       |

### é—´è·ç³»ç»Ÿ

```css
é¢æ¿å°ºå¯¸:
--topbar-height: 56px
--left-panel-width: 280px
--right-panel-width: 320px
--statusbar-height: 40px
```

### åŠ¨ç”»ç³»ç»Ÿ

**å†…ç½®åŠ¨ç”»**:
```css
accordion-down: 0.2s ease-out
accordion-up: 0.2s ease-out
pulse-subtle: 2s ease-in-out infinite
```

**è¿‡æ¸¡æ•ˆæœ**:
```css
transition-all duration-120/150 /* ç»„ä»¶åˆ‡æ¢ */
hover:shadow-soft-md hover:-translate-y-0.5 /* æ‚¬åœæå‡ */
```

### æš—è‰²æ¨¡å¼æ”¯æŒ

å®Œæ•´çš„æš—è‰²ä¸»é¢˜æ”¯æŒ,é€šè¿‡ `.dark` ç±»åˆ‡æ¢:

```css
.dark {
  --background: 240 6% 10%       /* æ·±è‰²èƒŒæ™¯ */
  --foreground: 240 20% 98%      /* æµ…è‰²æ–‡æœ¬ */
  --canvas: 240 6% 8%            /* æ·±è‰²ç”»å¸ƒ */
  ...
}
```

### ç»„ä»¶æ ·å¼è§„èŒƒ

**å¡ç‰‡**:
```css
rounded-lg border border-border bg-surface
hover:shadow-soft-md hover:-translate-y-0.5
```

**æŒ‰é’®**:
```css
size-sm: px-3 h-7
gap-1.5/2 /* å›¾æ ‡é—´è· */
```

**é€‰ä¸­çŠ¶æ€**:
```css
border-primary border-2 bg-accent
```

---

## ç»„ä»¶æ¶æ„åˆ†æ

### ç»„ä»¶æ ‘ç»“æ„

```
App
â”œâ”€â”€ Providers
â”‚   â”œâ”€â”€ QueryClientProvider
â”‚   â”œâ”€â”€ TooltipProvider
â”‚   â”œâ”€â”€ Toaster
â”‚   â””â”€â”€ Sonner
â””â”€â”€ Router
    â””â”€â”€ Index (ä¸»é¡µé¢)
        â”œâ”€â”€ TopBar
        â”œâ”€â”€ AssetsPanel
        â”‚   â””â”€â”€ UploadZone
        â”œâ”€â”€ CanvasArea
        â”‚   â”œâ”€â”€ OriginalView
        â”‚   â””â”€â”€ GridView
        â”‚       â””â”€â”€ IconPreviewCard (å¾ªç¯)
        â”œâ”€â”€ PropertiesPanel
        â””â”€â”€ StatusBar
```

### æ ¸å¿ƒç»„ä»¶æ¸…å•

#### 1. **TopBar** (`src/components/workbench/TopBar.tsx`)

**èŒè´£**: é¡¶éƒ¨å¯¼èˆªæ 

**å…ƒç´ **:
- Logo + äº§å“åç§°
- é¡¹ç›®åç§°(å¯é€‰æ˜¾ç¤º)
- å¯¼å‡ºæŒ‰é’®(å¸¦æ•°é‡å¾½ç« )
- è®¾ç½®èœå•(é‡ç½®å·¥ä½œåŒº)

**äº¤äº’**:
- å¯¼å‡º: è°ƒç”¨ `exportIconsAsZip`,è§¦å‘ä¸‹è½½
- é‡ç½®: è°ƒç”¨ `reset()`,æ¸…ç©ºçŠ¶æ€

**çŠ¶æ€ä¾èµ–**:
```typescript
detectedIcons, status, vectorizationPreset
```

---

#### 2. **AssetsPanel** (`src/components/workbench/AssetsPanel.tsx`)

**èŒè´£**: å·¦ä¾§èµ„æºé¢æ¿

**å†…å®¹**:
- é¢æ¿æ ‡é¢˜
- ä¸Šä¼ åŒºåŸŸ
- å›¾åƒä¿¡æ¯(ä¸Šä¼ åæ˜¾ç¤º)
- èƒŒæ™¯æ¨¡å¼æç¤º

**æ¡ä»¶æ¸²æŸ“**:
```typescript
{uploadedImage && (
  <InfoSection />
)}
```

---

#### 3. **CanvasArea** (`src/components/workbench/CanvasArea.tsx`)

**èŒè´£**: ä¸»ç”»å¸ƒåŒºåŸŸ

**ä¸‰ç§çŠ¶æ€**:

1. **ç©ºçŠ¶æ€** (`!uploadedImage`)
   - æ˜¾ç¤ºä¸Šä¼ å¼•å¯¼
   - ç½‘æ ¼èƒŒæ™¯è£…é¥°
   - å¤§å°ºå¯¸ UploadZone

2. **å¤„ç†ä¸­** (`detecting | processing`)
   - åŠ è½½åŠ¨ç”»
   - çŠ¶æ€æ–‡æœ¬

3. **å°±ç»ª** (`ready`)
   - è§†å›¾åˆ‡æ¢å™¨(Original/Grid)
   - é€‰ä¸­æ•°é‡æ˜¾ç¤º
   - å¯¹åº”è§†å›¾ç»„ä»¶

**å­ç»„ä»¶**:
- `OriginalView`: åŸå›¾+è¾¹ç•Œæ¡†å åŠ 
- `GridView`: ç½‘æ ¼å¡ç‰‡å¸ƒå±€

**å…³é”®é€»è¾‘**:
```typescript
useEffect(() => {
  if (uploadedImage && status === 'detecting') {
    processImage();
  }
}, [uploadedImage, status]);
```

---

#### 4. **PropertiesPanel** (`src/components/workbench/PropertiesPanel.tsx`)

**èŒè´£**: å³ä¾§å±æ€§é¢æ¿

**é…ç½®é¡¹**:

1. **ç½‘æ ¼å¸ƒå±€**
   - ä¸‹æ‹‰é€‰æ‹©(3x3 ~ 8x8)
   - æ˜¾ç¤ºå›¾æ ‡æ•°é‡

2. **çŸ¢é‡åŒ–è´¨é‡**
   - å•é€‰æŒ‰é’®ç»„
   - ä¸‰ç§é¢„è®¾è¯´æ˜
   - è§†è§‰é€‰ä¸­åé¦ˆ

3. **é€‰æ‹©æ“ä½œ**
   - å…¨é€‰æŒ‰é’®
   - å…¨ä¸é€‰æŒ‰é’®
   - åŠ¨æ€ç¦ç”¨çŠ¶æ€

**æ¡ä»¶æ˜¾ç¤º**:
```typescript
{detectedIcons.length > 0 && (
  <SelectionActions />
)}
```

---

#### 5. **StatusBar** (`src/components/workbench/StatusBar.tsx`)

**èŒè´£**: åº•éƒ¨çŠ¶æ€æ 

**å†…å®¹**:
- çŠ¶æ€æŒ‡ç¤ºç¯(é¢œè‰²+è„‰å†²åŠ¨ç”»)
- çŠ¶æ€æ–‡æœ¬
- é€‰ä¸­æ•°é‡ç»Ÿè®¡
- éšç§æç¤º

**çŠ¶æ€æ˜ å°„**:
```typescript
idle    â†’ ç°è‰²åœ†ç‚¹
ready   â†’ ç»¿è‰²åœ†ç‚¹
processing â†’ è“è‰²è„‰å†²åœ†ç‚¹
```

---

#### 6. **IconPreviewCard** (`src/components/workbench/IconPreviewCard.tsx`)

**èŒè´£**: å•ä¸ªå›¾æ ‡å¡ç‰‡

**å…ƒç´ **:
- å›¾åƒé¢„è§ˆ(pixelated æ¸²æŸ“)
- é€‰ä¸­å¤é€‰æ¡†(æ‚¬åœæ˜¾ç¤º)
- ç¼–å·æ ‡ç­¾
- æ‚¬åœæ•ˆæœ

**äº¤äº’**:
- ç‚¹å‡»åˆ‡æ¢é€‰ä¸­çŠ¶æ€
- æ‚¬åœæ˜¾ç¤ºå¤é€‰æ¡†

**æ ·å¼ç‰¹ç‚¹**:
```css
aspect-square          /* æ­£æ–¹å½¢ */
imageRendering: pixelated  /* åƒç´ é£ */
group-hover:opacity-100  /* æ‚¬åœæ˜¾ç¤ºå¤é€‰æ¡† */
```

---

#### 7. **UploadZone** (`src/components/workbench/UploadZone.tsx`)

**èŒè´£**: æ–‡ä»¶ä¸Šä¼ ç»„ä»¶

**ä¸¤ç§æ¨¡å¼**:

1. **ç´§å‡‘æ¨¡å¼** (`compact=true`)
   - æ˜¾ç¤ºå·²ä¸Šä¼ å›¾åƒ
   - æ‚¬åœæ˜¾ç¤º"æ›¿æ¢"æŒ‰é’®
   - å›¾åƒä¿¡æ¯

2. **æ ‡å‡†æ¨¡å¼** (`compact=false`)
   - å¤§å°ºå¯¸è™šçº¿æ¡†
   - æ‹–æ‹½æ”¯æŒ
   - å›¾æ ‡+æ–‡æœ¬å¼•å¯¼

**äº‹ä»¶å¤„ç†**:
- `onDrop`: å¤„ç†æ–‡ä»¶æ‹–æ”¾
- `onClick`: è§¦å‘æ–‡ä»¶é€‰æ‹©
- `onDragOver`: è§†è§‰åé¦ˆ

**æ–‡ä»¶éªŒè¯**:
```typescript
file.type.startsWith('image/')
```

---

### ç»„ä»¶é€šä¿¡æ¨¡å¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Zustand Store               â”‚
â”‚    (workbench-store.ts)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ (useWorkbenchStore)
           â”‚
     â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â†“           â†“         â†“         â†“
  TopBar    CanvasArea   Assets   Properties
     â”‚           â”‚         Panel     Panel
     â”‚           â†“
     â”‚     IconPreviewCard
     â”‚
     â†“ (Actions)
  exportIconsAsZip
```

**æ¨¡å¼**: æ‰€æœ‰ç»„ä»¶ä» Store è¯»å–çŠ¶æ€,è°ƒç”¨ Actions æ›´æ–°çŠ¶æ€

---

## æ•°æ®æµè½¬è¿‡ç¨‹

### å®Œæ•´ç”¨æˆ·æµç¨‹

```
1. ç”¨æˆ·æ“ä½œ: æ‹–æ‹½/ç‚¹å‡»ä¸Šä¼ å›¾åƒ
   â†“
2. UploadZone.handleFile()
   - FileReader è¯»å–ä¸º Data URL
   - Image() è·å–å°ºå¯¸
   â†“
3. setUploadedImage(dataUrl, file, info)
   - Store æ›´æ–°çŠ¶æ€
   - status â†’ 'detecting'
   â†“
4. CanvasArea æ£€æµ‹ status å˜åŒ–
   - useEffect è§¦å‘
   â†“
5. processImage() è°ƒç”¨ detectIconsInImage()
   - Canvas è£å‰ªç½‘æ ¼
   - ç”Ÿæˆ DetectedIcon[]
   â†“
6. setDetectedIcons(icons)
   - status â†’ 'ready'
   â†“
7. ç”¨æˆ·åœ¨ PropertiesPanel è®¾ç½®
   - setGridSize()
   - setVectorizationPreset()
   â†“
8. ç”¨æˆ·åœ¨ CanvasArea åˆ‡æ¢é€‰æ‹©
   - toggleIconSelection()
   â†“
9. ç”¨æˆ·ç‚¹å‡» Export
   â†“
10. exportIconsAsZip()
    - è¿‡æ»¤é€‰ä¸­å›¾æ ‡
    - å¾ªç¯ imageToSvg()
    - æ‰“åŒ… ZIP
    - è§¦å‘ä¸‹è½½
```

### å…³é”®æ•°æ®è½¬æ¢

```
File (ç”¨æˆ·ä¸Šä¼ )
  â†“ FileReader
Data URL (base64)
  â†“ Image()
HTMLImageElement
  â†“ Canvas
ImageData (åƒç´ æ•°æ®)
  â†“ detectIconsInImage
DetectedIcon[] (ç½‘æ ¼åˆ†å‰²)
  â†“ imageToSvg
SVG String (çŸ¢é‡è·¯å¾„)
  â†“ JSZip
Blob (ZIPæ–‡ä»¶)
  â†“ URL.createObjectURL
Download Link
```

### çŠ¶æ€åŒæ­¥æœºåˆ¶

**å•å‘æ•°æ®æµ**:
```
User Action â†’ Component Event â†’ Store Action â†’ State Update â†’ Re-render
```

**å¼‚æ­¥å¤„ç†**:
```typescript
// æ‰€æœ‰å¼‚æ­¥æ“ä½œéƒ½é€šè¿‡ Promise å¤„ç†
detectIconsInImage() â†’ Promise<DetectedIcon[]>
imageToSvg() â†’ Promise<string>
exportIconsAsZip() â†’ Promise<Blob>
```

---

## ç‰¹è‰²äº®ç‚¹

### 1. æœ¬åœ°ä¼˜å…ˆæ¶æ„

**ç‰¹ç‚¹**: æ‰€æœ‰å¤„ç†åœ¨æµè§ˆå™¨å®Œæˆ,æ— éœ€æœåŠ¡å™¨

**ä¼˜åŠ¿**:
- âœ… éšç§ä¿æŠ¤
- âœ… é›¶æˆæœ¬
- âœ… å¿«é€Ÿå“åº”
- âœ… ç¦»çº¿å¯ç”¨

**å®ç°**:
- Canvas API (å›¾åƒå¤„ç†)
- JSZip (æ–‡ä»¶æ‰“åŒ…)
- Blob API (æ–‡ä»¶ä¸‹è½½)

### 2. æ™ºèƒ½çŸ¢é‡åŒ–ç®—æ³•

**è‡ªç ”ç®—æ³•**,éç®€å•çš„ç¬¬ä¸‰æ–¹åº“è°ƒç”¨:

```
å›¾åƒå¤„ç† â†’ äºŒå€¼åŒ– â†’ è¾¹ç¼˜æ£€æµ‹ â†’ è½®å»“è¿½è¸ª â†’ è·¯å¾„ç®€åŒ–
```

**çµæ´»æ€§**:
- ä¸‰ç§è´¨é‡é¢„è®¾
- å¯è°ƒå‚æ•°(é˜ˆå€¼ã€ç®€åŒ–åº¦)
- é€‚åº”ä¸åŒå¤æ‚åº¦çš„å›¾æ ‡

### 3. å“åº”å¼å·¥ä½œå°å¸ƒå±€

**è‡ªé€‚åº”è®¾è®¡**:
- å°å±: éšè—ä¾§è¾¹æ 
- ä¸­å±: æ˜¾ç¤ºå·¦ä¾§é¢æ¿
- å¤§å±: æ˜¾ç¤ºå®Œæ•´ä¸‰æ 

**æµç•…ä½“éªŒ**:
- é¢æ¿å®½åº¦å›ºå®š
- ä¸­é—´åŒºåŸŸè‡ªé€‚åº”
- é˜²æ­¢å¸ƒå±€æŠ–åŠ¨

### 4. ç»†è…»çš„äº¤äº’è®¾è®¡

**è§†è§‰åé¦ˆ**:
```css
/* æ‚¬åœæå‡ */
hover:-translate-y-0.5 hover:shadow-soft-md

/* è„‰å†²åŠ¨ç”» */
animate-pulse

/* è¿‡æ¸¡åŠ¨ç”» */
transition-all duration-150
```

**çŠ¶æ€æŒ‡ç¤º**:
- çŠ¶æ€ç¯(é¢œè‰²+åŠ¨ç”»)
- è¿›åº¦æ–‡æœ¬
- é€‰ä¸­æ•°é‡å¾½ç« 
- Toast é€šçŸ¥

**é”™è¯¯å¤„ç†**:
- å¯¼å‡ºå¤±è´¥æç¤º
- æ–‡ä»¶ç±»å‹éªŒè¯
- ç©ºçŠ¶æ€å¼•å¯¼

### 5. æ¨¡å—åŒ–æ¶æ„

**æ¸…æ™°èŒè´£**:
- UI ç»„ä»¶(å±•ç¤ºå±‚)
- Store(çŠ¶æ€å±‚)
- icon-processor(ä¸šåŠ¡é€»è¾‘å±‚)

**å¯æµ‹è¯•æ€§**:
- çº¯å‡½æ•°ç®—æ³•
- ç‹¬ç«‹çš„å·¥å…·å‡½æ•°
- æ— å‰¯ä½œç”¨çš„ç»„ä»¶

### 6. ç±»å‹å®‰å…¨

**å®Œæ•´ TypeScript æ”¯æŒ**:
```typescript
export interface DetectedIcon {
  id: string;
  x: number;
  y: number;
  width: number;
  height: number;
  selected: boolean;
  svgData?: string;
  imageData?: string;
}
```

**ä¼˜åŠ¿**:
- ç¼–è¯‘æ—¶æ£€æŸ¥
- IDE æ™ºèƒ½æç¤º
- é‡æ„å‹å¥½

---

## å¯ä¼˜åŒ–å»ºè®®

### æ€§èƒ½ä¼˜åŒ–

#### 1. å¤§å›¾åƒå¤„ç†ä¼˜åŒ–

**é—®é¢˜**: å¤§å°ºå¯¸å›¾åƒå¯èƒ½å¯¼è‡´å¤„ç†ç¼“æ…¢

**å»ºè®®**:
```typescript
// æ·»åŠ æœ€å¤§å°ºå¯¸é™åˆ¶
const MAX_SIZE = 4096;
if (img.width > MAX_SIZE || img.height > MAX_SIZE) {
  // ç¼©æ”¾åˆ°æœ€å¤§å°ºå¯¸
  const scale = Math.min(MAX_SIZE / img.width, MAX_SIZE / img.height);
  // ...
}

// æ·»åŠ è¿›åº¦æç¤º
setProgress(percent);
```

#### 2. çŸ¢é‡åŒ–ç¼“å­˜

**é—®é¢˜**: é‡å¤çŸ¢é‡åŒ–ç›¸åŒå›¾æ ‡

**å»ºè®®**:
```typescript
// ä½¿ç”¨ Map ç¼“å­˜
const svgCache = new Map<string, string>();

function imageToSvg(imageData: string, preset: string) {
  const cacheKey = `${imageData.slice(0, 100)}-${preset}`;
  if (svgCache.has(cacheKey)) {
    return svgCache.get(cacheKey);
  }
  // ...
}
```

#### 3. è™šæ‹Ÿæ»šåŠ¨

**é—®é¢˜**: å¤§é‡å›¾æ ‡æ—¶ç½‘æ ¼è§†å›¾æ€§èƒ½

**å»ºè®®**:
```typescript
import { useVirtualizer } from '@tanstack/react-virtual';

// åªæ¸²æŸ“å¯è§åŒºåŸŸå›¾æ ‡
const virtualizer = useVirtualizer({
  count: detectedIcons.length,
  getScrollElement: () => parentRef.current,
  estimateSize: () => 100,
});
```

### åŠŸèƒ½å¢å¼º

#### 1. æ‰‹åŠ¨è°ƒæ•´ç½‘æ ¼

**å½“å‰**: å›ºå®šç½‘æ ¼å¸ƒå±€

**å»ºè®®**:
```typescript
// å…è®¸ç”¨æˆ·æ‹–æ‹½è°ƒæ•´ç½‘æ ¼çº¿
interface ManualGrid {
  rows: number[];  // æ¯è¡Œçš„Yåæ ‡
  cols: number[];  // æ¯åˆ—çš„Xåæ ‡
}
```

#### 2. æ‰¹é‡ç¼–è¾‘

**æ–°å¢åŠŸèƒ½**:
- æ‰¹é‡é‡å‘½å
- æ‰¹é‡è°ƒæ•´é¢œè‰²
- æ‰¹é‡åº”ç”¨æ ·å¼

#### 3. å¯¼å‡ºæ ¼å¼æ‰©å±•

**å½“å‰**: ä»…æ”¯æŒ SVG

**å»ºè®®**:
```typescript
exportIconsAs(icons, format: 'svg' | 'png' | 'pdf' | 'ico')
```

#### 4. å†å²è®°å½•

**åŠŸèƒ½**:
- æ’¤é”€/é‡åš
- æ“ä½œå†å²
- ç‰ˆæœ¬å¯¹æ¯”

### ç”¨æˆ·ä½“éªŒä¼˜åŒ–

#### 1. å¿«æ·é”®æ”¯æŒ

```typescript
useEffect(() => {
  const handleKeyPress = (e: KeyboardEvent) => {
    if (e.ctrlKey && e.key === 'a') {
      e.preventDefault();
      selectAllIcons();
    }
    if (e.ctrlKey && e.key === 'e') {
      e.preventDefault();
      handleExport();
    }
  };
  window.addEventListener('keydown', handleKeyPress);
  return () => window.removeEventListener('keydown', handleKeyPress);
}, []);
```

#### 2. æ‹–æ‹½æ’åº

**åŠŸèƒ½**: å…è®¸æ‹–æ‹½è°ƒæ•´å›¾æ ‡é¡ºåº

#### 3. é¢„è®¾ç®¡ç†

**åŠŸèƒ½**: ä¿å­˜å¸¸ç”¨çš„ç½‘æ ¼é…ç½®

#### 4. å¯¹æ¯”è§†å›¾

**åŠŸèƒ½**: å¹¶æ’æ˜¾ç¤ºåŸå›¾å’ŒçŸ¢é‡åŒ–ç»“æœ

### ä»£ç è´¨é‡

#### 1. å•å…ƒæµ‹è¯•

```typescript
// icon-processor.test.ts
describe('detectIconsInImage', () => {
  it('should detect 4x4 grid', async () => {
    const icons = await detectIconsInImage(testImage, 4, 4);
    expect(icons).toHaveLength(16);
  });
});
```

#### 2. E2E æµ‹è¯•

```typescript
// ä½¿ç”¨ Playwright
test('export icons', async ({ page }) => {
  await page.goto('/');
  await page.setInputFiles('input[type="file"]', 'test.png');
  await page.click('button:has-text("Export")');
  // ...
});
```

#### 3. é”™è¯¯è¾¹ç•Œ

```typescript
<ErrorBoundary fallback={<ErrorFallback />}>
  <CanvasArea />
</ErrorBoundary>
```

### å¯è®¿é—®æ€§

#### 1. ARIA æ ‡ç­¾

```typescript
<button
  aria-label="Export selected icons"
  aria-describedby="export-count"
>
  Export
  <span id="export-count">{selectedCount} icons</span>
</button>
```

#### 2. é”®ç›˜å¯¼èˆª

```typescript
// ç½‘æ ¼è§†å›¾æ”¯æŒæ–¹å‘é”®
useEffect(() => {
  const handleKeyDown = (e: KeyboardEvent) => {
    if (e.key === 'ArrowRight') {
      // ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå›¾æ ‡
    }
  };
}, []);
```

#### 3. å±å¹•é˜…è¯»å™¨

```typescript
<img
  src={icon.imageData}
  alt={`Icon ${index + 1}, ${icon.selected ? 'selected' : 'not selected'}`}
/>
```

---

## æŠ€æœ¯å€ºåŠ¡

### å·²çŸ¥é™åˆ¶

1. **çŸ¢é‡åŒ–ç®—æ³•ç²¾åº¦**
   - å½“å‰ç®—æ³•ä¸ºç®€åŒ–ç‰ˆ
   - å¤æ‚å›¾å½¢å¯èƒ½å¤±çœŸ
   - å»ºè®®: é›†æˆ Potrace æˆ– Imagetracer

2. **æµè§ˆå™¨å…¼å®¹æ€§**
   - Canvas API éœ€è¦ç°ä»£æµè§ˆå™¨
   - å»ºè®®: æ·»åŠ  polyfill æˆ–é™çº§æ–¹æ¡ˆ

3. **å†…å­˜å ç”¨**
   - å¤§å›¾åƒæ—¶ Data URL å ç”¨å†…å­˜
   - å»ºè®®: ä½¿ç”¨ Blob URL æ›¿ä»£

### å®‰å…¨è€ƒè™‘

1. **æ–‡ä»¶ä¸Šä¼ **
   - å½“å‰ä»…éªŒè¯ MIME ç±»å‹
   - å»ºè®®: æ·»åŠ æ–‡ä»¶å¤§å°é™åˆ¶
   - å»ºè®®: æ·»åŠ ç—…æ¯’æ‰«æ(äº‘ç«¯)

2. **XSS é˜²æŠ¤**
   - SVG å†…å®¹éœ€è¦æ¸…ç†
   - å»ºè®®: ä½¿ç”¨ DOMPurify

---

## æ€»ç»“

### åº”ç”¨ä¼˜åŠ¿

âœ… **æ¶æ„æ¸…æ™°**: ä¸‰æ å·¥ä½œå°å¸ƒå±€,ç¬¦åˆç”¨æˆ·ä¹ æƒ¯
âœ… **æŠ€æœ¯ç°ä»£**: React 19 + TypeScript + Vite
âœ… **æ€§èƒ½ä¼˜è‰¯**: æœ¬åœ°å¤„ç†,å¿«é€Ÿå“åº”
âœ… **è®¾è®¡ç²¾ç¾**: Lumina è®¾è®¡ç³»ç»Ÿ,æŸ”å’Œç¾è§‚
âœ… **ç±»å‹å®‰å…¨**: å®Œæ•´ TypeScript æ”¯æŒ
âœ… **å¯æ‰©å±•æ€§**: æ¨¡å—åŒ–è®¾è®¡,æ˜“äºæ‰©å±•

### é€‚ç”¨åœºæ™¯

- âœ… AI å›¾æ ‡æ‰¹é‡å¤„ç†
- âœ… å›¾æ ‡çŸ¢é‡åŒ–
- âœ… Sprite Sheet åˆ†å‰²
- âœ… æ‰¹é‡å›¾åƒå¯¼å‡º

### å¤åˆ»è¦ç‚¹

1. **æ ¸å¿ƒç®—æ³•**: é‡ç‚¹å®ç° `icon-processor.ts`
2. **å¸ƒå±€ç»“æ„**: å¤åˆ»ä¸‰æ å·¥ä½œå°
3. **çŠ¶æ€ç®¡ç†**: ä½¿ç”¨ Zustand æˆ– Redux
4. **è®¾è®¡ç³»ç»Ÿ**: å‚è€ƒ Lumina é…è‰²
5. **äº¤äº’ç»†èŠ‚**: æ³¨æ„æ‚¬åœã€åŠ¨ç”»ã€åé¦ˆ

### å¼€å‘ä¼˜å…ˆçº§

```
P0 (æ ¸å¿ƒåŠŸèƒ½):
  â”œâ”€ å›¾åƒä¸Šä¼ 
  â”œâ”€ ç½‘æ ¼æ£€æµ‹
  â”œâ”€ åŒè§†å›¾æ˜¾ç¤º
  â””â”€ SVG å¯¼å‡º

P1 (å¢å¼ºåŠŸèƒ½):
  â”œâ”€ é€‰æ‹©ç®¡ç†
  â”œâ”€ è´¨é‡é¢„è®¾
  â””â”€ çŠ¶æ€åé¦ˆ

P2 (ä¼˜åŒ–ä½“éªŒ):
  â”œâ”€ å¿«æ·é”®
  â”œâ”€ æ‹–æ‹½äº¤äº’
  â””â”€ å†å²è®°å½•
```

---

**æŠ¥å‘Šå®Œæˆ** ğŸ“

æœ¬æ–‡æ¡£æä¾›äº† AI Icon Workbench çš„å®Œæ•´æŠ€æœ¯åˆ†æ,å¯ä½œä¸ºå¤åˆ»å¼€å‘çš„è¯¦ç»†å‚è€ƒã€‚
