# 图标工作台 - 用户手册

## 📖 简介

**图标工作台**是一个专业的图标矢量化工具，可以将位图图标转换为高质量的矢量 SVG 格式，并支持**彩色矢量化**。

### 核心功能

- ✅ **网格检测**：自动识别图标网格布局
- 🎨 **彩色矢量化**：保留原始颜色的 SVG 转换
- 📦 **批量导出**：一键导出所有图标为 ZIP 文件
- ⚙️ **质量预设**：三种质量模式可选

---

## 🚀 快速开始

### 第一步：上传图片

1. 点击左侧的**上传区域**
2. 选择一个图标网格图片（如 4×4 网格）
3. 等待自动检测

**支持的格式**：PNG、JPG、WEBP
**建议分辨率**：992×1056px 或更高

### 第二步：调整网格（可选）

如果检测不准确，可以在右侧"属性面板"中调整网格布局：
- 3×3（9 个图标）
- 4×4（16 个图标）⭐
- 5×5（25 个图标）
- 6×6（36 个图标）
- 8×8（64 个图标）

### 第三步：**点击矢量化按钮** ⭐ 重要！

在顶部工具栏找到 **"矢量化"** 按钮（魔法棒图标 🪄）

**为什么必须点击这个按钮？**
- 触发批量彩色矢量化
- 将所有图标转换为 SVG
- 保存矢量化结果以便预览和导出

**处理时间**：
- 16 个图标：约 5-10 秒
- 25 个图标：约 15-20 秒

### 第四步：预览效果

1. 在左侧网格中选择任意图标
2. 在右侧"属性面板"查看：
   - **原始图片**：彩色位图
   - **矢量化结果**：彩色 SVG 预览
   - **文件信息**：大小、路径数量

### 第五步：导出 SVG

1. 点击顶部 **"导出 SVG"** 按钮
2. 下载 `icons.zip` 文件
3. 解压后获得所有 SVG 文件

---

## 🎨 矢量化质量预设

在右侧"属性面板"可以选择三种质量模式：

### 1️⃣ Clean（干净）

**特点**：
- ✅ 颜色较少（4-6 种）
- ✅ 文件较小
- ✅ 路径简洁
- ✅ 适合图标库、UI 设计

**适用场景**：
- 需要快速加载
- 存储空间有限
- 简洁的设计风格

### 2️⃣ Balanced（平衡）⭐ 推荐

**特点**：
- ✅ 颜色适中（6-8 种）
- ✅ 质量与大小平衡
- ✅ 路径较精细
- ✅ **大多数场景的最佳选择**

**适用场景**：
- 网页设计
- 移动应用
- 一般矢量需求

### 3️⃣ Detailed（详细）

**特点**：
- ✅ 颜色丰富（10-16 种）
- ✅ 细节完整保留
- ✅ 路径高度精确
- ⚠️ 文件较大

**适用场景**：
- 打印设计
- 高分辨率展示
- 需要完整细节

---

## 🖥️ 界面说明

### 顶部工具栏

```
┌─────────────────────────────────────────────────────┐
│ 图标工作台  [16 icons detected]  [🪄 矢量化] [⬇️ 导出]  │
└─────────────────────────────────────────────────────┘
```

- **左侧**：应用标题
- **中间**：检测到的图标数量
- **右侧**：
  - **矢量化按钮**：批量转换所有图标
  - **导出按钮**：下载 ZIP 文件
  - **主题切换**：明暗模式
  - **设置**：语言、重置等

### 左侧资源面板

```
┌───────────────────┐
│ 资源面板           │
│ ┌───────────────┐ │
│ │ 源图片         │ │
│ │ [图标预览]     │ │
│ │ 992×1056px    │ │
│ └───────────────┘ │
│                   │
│ 背───────────────┐│
│ │ 背景模式       ││
│ │ 自动检测(纯色) ││
│ └───────────────┘│
└───────────────────┘
```

### 中间画布区域

```
┌─────────────────────────────────┐
│  ┌───┐ ┌───┐ ┌───┐ ┌───┐      │
│  │   │ │   │ │   │ │   │ ...  │
│  └───┘ └───┘ └───┘ └───┘      │
│  ┌───┐ ┌───┐ ┌───┐ ┌───┐      │
│  │   │ │ ➜ │ │   │ │   │ ...  │  ← 选中状态
│  └───┘ └───┘ └───┘ └───┘      │
│                                 │
│  4×4 网格视图（16 个图标）      │
└─────────────────────────────────┘
```

- **蓝色边框**：当前选中的图标
- **点击选择**：切换选中的图标

### 右侧属性面板

```
┌───────────────────┐
│ 属性面板           │
│ ┌───────────────┐ │
│ │ box-3-3        │ │  ← 图标 ID
│ │ 248×264px     │ │  ← 尺寸
│ │ [1x] [2x][4x] │ │  ← 缩放
│ └───────────────┘ │
│ ┌───────────────┐ │
│ │ 原始图片       │ │
│ │ [图标预览]     │ │
│ └───────────────┘ │
│ ┌───────────────┐ │
│ │ 矢量化结果     │ │
│ │ [彩色SVG预览]  │ │  ← 矢量化后显示
│ └───────────────┘ │
│                   │
│ 网格布局：         │
│ [下拉选择框]      │
└───────────────────┘
```

---

## ⚠️ 常见问题

### Q1: 为什么必须点击"矢量化"按钮？

**A**: 因为矢量化是一个**计算密集型操作**，需要：
- 逐个处理每个图标
- 执行颜色聚类算法
- 生成矢量路径

点击按钮可以：
- ✅ 在合适的时间触发处理
- ✅ 显示处理进度
- ✅ 避免自动处理导致的性能问题

### Q2: 为什么导出的还是黑白的？

**A**: 请检查以下步骤：
1. ✅ 上传的是**彩色**图片
2. ✅ **点击了"矢量化"按钮**
3. ✅ 等待处理完成
4. ✅ 在预览中看到**彩色**效果
5. ✅ 然后导出

如果预览中是黑白的，可能是：
- 原图本身就是黑白的
- 选择了错误的预设

### Q3: 矢量化失败怎么办？

**A**: 查看浏览器控制台（F12），查看错误信息：
- **"Image is not defined"**：刷新页面重试
- **"VTracer 未初始化"**：等待页面完全加载
- **其他错误**：检查图片格式和大小

### Q4: 可以只矢量化部分图标吗？

**A**: 目前不支持。但你可以：
1. 先全部矢量化
2. 导出时只选择需要的图标
3. 或者删除不需要的图标

### Q5: 支持透明背景吗？

**A**: ✅ 支持！VTracer 会自动处理透明背景。

---

## 💡 使用技巧

### 技巧 1：选择合适的预设

- **UI 图标**：使用 Clean 预设
- **插画图标**：使用 Balanced 预设
- **艺术品**：使用 Detailed 预设

### 技巧 2：批量处理大文件

如果图标很多（如 64 个）：
1. 可以先处理部分图标测试效果
2. 满意后再处理全部
3. 处理期间不要关闭页面

### 技巧 3：检查结果

导出前务必：
1. 选择多个图标预览
2. 检查颜色是否正确
3. 确认文件大小合理

### 技巧 4：重置工作区

如果需要重新开始：
1. 点击顶部设置（齿轮图标）
2. 选择"重置工作区"
3. 重新上传图片

---

## 📊 性能参考

| 图标数量 | 处理时间 | 文件大小（Balanced） |
|---------|---------|---------------------|
| 9       | 3-5 秒  | ~50 KB             |
| 16      | 5-10 秒 | ~100 KB            |
| 25      | 15-20 秒| ~150 KB            |
| 36      | 30-40 秒| ~200 KB            |

*处理时间因设备性能而异*

---

## 🔧 技术规格

### 输入格式
- **图片格式**：PNG、JPG、WEBP
- **颜色模式**：RGB、RGBA
- **建议尺寸**：992×1056px 或更高

### 输出格式
- **文件格式**：SVG（可缩放矢量图形）
- **颜色**：保留原始颜色（彩色）
- **兼容性**：所有现代浏览器、设计工具

### 矢量化算法
- **核心引擎**：visioncortex/vtracer WASM
- **颜色模式**：ColorImageConverter（彩色）
- **路径算法**：样条曲线（Spline）

---

## 📞 获取帮助

如果遇到问题：
1. 查看浏览器控制台（F12）
2. 检查错误日志
3. 参考 [技术文档](./VTRACER_MIGRATION_COMPLETE.md)
4. 查看 [Vite 修复文档](./VTRACER_VITE_FIX.md)

---

## 🎉 总结

使用图标工作台的完整流程：

```
1. 上传图片
   ↓
2. 自动检测（或调整网格）
   ↓
3. 点击"矢量化"按钮 ⭐
   ↓
4. 预览效果
   ↓
5. 选择质量预设（可选）
   ↓
6. 导出 SVG
```

**记住**：第 3 步**必须做**，否则导出的是空文件或黑白文件！

---

**版本**：v1.0
**更新日期**：2025-01-13
**技术栈**：React + TypeScript + VTracer WASM
